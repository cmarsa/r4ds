# Chapter 21 R Markdown
To produce a complete report containing all text, code, and results,
click “Knit” or press `Cmd/Ctrl-Shift-K`. You can also do this pro‐
grammatically with `rmarkdown::render("1-example.Rmd")` . This
will display the report in the viewer pane, and create a self-contained
HTML file that you can share with others.

When you knit the document R Markdown sends the `.Rmd` file to
knitr, which executes all of the code chunks and creates a new
Markdown (`.md`) document that includes the code and its output.
The Markdown file generated by knitr is then processed by __pandoc__,
which is responsible for creating the finished file. The advantage of
this two-step workflow is that you can create a very wide range of
output formats, as you’ll learn about in Chapter 23.


## Text Formatting with Markdown
Prose in .Rmd files is written in Markdown, a lightweight set of con‐
ventions for formatting plain-text files. Markdown is designed to be
easy to read and easy to write. It is also very easy to learn. The fol‐
lowing guide shows how to use Pandoc’s Markdown, a slightly
extended version of Markdown that R Markdown understands:

Text formatting
---------------------------------------------------------------------------
*italic* or _italic_
**bold** or __bold__
`code`
superscript^2^ and subscript~2~

Headings
---------------------------------------------------------------------------
# 1st Level Header
## 2nd Level Header
### 3rd Level Header

Lists
---------------------------------------------------------------------------
* Bulleted list item 1
* Item2
    * item 2a
    * item 2b

1. Numbered list item 1
1. Item 2. The nubmers are incremented automatically
in the output

Tables
---------------------------------------------------------------------------
First Header | Second Header
------------ | -------------
Content Cell | Content Cell
Content Cell | Content Cell


Code Chunks
---------------------------------------------------------------------------
To run code inside an R Markdown document, you need to insert a
chunk. There are three ways to do so:

1. The keyboard shortcut Cmd/ctrl-Alt-I
2. The "Insert" button icon in the editor toolbar
3. By manually typing the chunk delimeters ```{r} and ```

There is one chunk name that imbues special behavior: setup .
When you’re in a notebook mode, the chunk named setup will be
run automatically once, before any other code is run.

### Chunk Options
The most important set of options controls if your code block is exe‐
cuted and what results are inserted in the finished report:

* `eval = FALSE` prevents code from being evaluated. (And obvi‐
ously if the code is not run, no results will be generated.) This is
useful for displaying example code, or for disabling a large block
of code without commenting each line.
* `include = FALSE` runs the code, but doesn’t show the code or
results in the final document. Use this for setup code that you
don’t want cluttering your report.
* `echo = FALSE` prevents code, but not the results from appearing
in the finished file. Use this when writing reports aimed at peo‐
ple who don’t want to see the underlying R code.
* `message = FALSE` or `warning = FALSE` prevents messages or
warnings from appearing in the finished file.
* `results = 'hide'` hides printed output; `fig.show = 'hide'`
hides plots.
* `error = TRUE` causes the render to continue even if code
returns an error. This is rarely something you’ll want to include
in the final version of your report, but can be very useful if you
need to debug exactly what is going on inside your .Rmd. It’s
also useful if you’re teaching R and want to deliberately include
an error. The default, `error = FALSE` , causes knitting to fail if
there is a single error in the document.

### Tables
```{r}
knitr::kable(
    mtcars[1:5, ],
    captions = 'A knitr kable'
)
```

```{r}
# a normal table
mtcars[1:5, ]
```

### Caching
Normally, each knit of a document starts from a completely clean
slate. This is great for reproducibility, because it ensures that you’ve
captured every important computation in code. However, it can be
painful if you have some computations that take a long time. The
solution is `cache = TRUE` . When set, this will save the output of the
chunk to a specially named file on disk. On subsequent runs, knitr
will check to see if the code has changed, and if it hasn’t, it will reuse
the cached results.

### Inline Code
There is one other way to embed R code into an R Markdown docu‐
ment: directly into the text, with: `r ` . This can be very useful if you
mention properties of your data in the text.

We have data about `r nrow(mtcars)` cars.

